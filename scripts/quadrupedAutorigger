import maya.cmds as cmds

''' Place locators to define rig shape '''

def SetColorOverrideBlue(s):
    cmds.setAttr(s + '.overrideEnabled', 1)
    cmds.setAttr(s + '.overrideColor', 15)

def SetColorOverrideYellow(s):
    cmds.setAttr(s + '.overrideEnabled', 1)
    cmds.setAttr(s + '.overrideColor', 17)

def SetColorOverrideRed(s):
    cmds.setAttr(s + '.overrideEnabled', 1)
    cmds.setAttr(s + '.overrideColor', 13)
    
def lockTranslate(s):
    cmds.setAttr(s + '.tx', k = False, l = True)
    cmds.setAttr(s + '.ty', k = False, l = True)
    cmds.setAttr(s + '.tz', key = False, l = True)

def lockScale(s):
    cmds.setAttr(s + '.sx', k = False, l = True)
    cmds.setAttr(s + '.sy', k = False, l = True)
    cmds.setAttr(s + '.sz', k = False, l = True)

def lockRotate(s):
    cmds.setAttr(s + '.rx', k = False, l = True)
    cmds.setAttr(s + '.ry', k = False, l = True)
    cmds.setAttr(s + '.rz', k = False, l = True)

hindToe = cmds.spaceLocator(n='L_hindToe_LOC')
cmds.setAttr(hindToe[0]+'.translateX', 12)
cmds.setAttr(hindToe[0]+'.translateZ', -20)
SetColorOverrideBlue(hindToe[0])

hindAnkle = cmds.spaceLocator(n='L_hindAnkle_LOC')
cmds.setAttr(hindAnkle[0]+'.translateX', 12)
cmds.setAttr(hindAnkle[0]+'.translateY', 5)
cmds.setAttr(hindAnkle[0]+'.translateZ', -23)
SetColorOverrideBlue(hindAnkle[0])

hindKnee = cmds.spaceLocator(n='L_hindKnee_LOC')
cmds.setAttr(hindKnee[0]+'.translateX', 12)
cmds.setAttr(hindKnee[0]+'.translateY', 25)
cmds.setAttr(hindKnee[0]+'.translateZ', -28)
SetColorOverrideBlue(hindKnee[0])

hindUpperKnee = cmds.spaceLocator(n='L_hindUpperKnee_LOC')
cmds.setAttr(hindUpperKnee[0]+'.translateX', 12)
cmds.setAttr(hindUpperKnee[0]+'.translateY', 36)
cmds.setAttr(hindUpperKnee[0]+'.translateZ', -19)
SetColorOverrideBlue(hindUpperKnee[0])

hindFemur = cmds.spaceLocator(n='L_hindFemur_LOC')
cmds.setAttr(hindFemur[0]+'.translateX', 12)
cmds.setAttr(hindFemur[0]+'.translateY', 50)
cmds.setAttr(hindFemur[0]+'.translateZ', -25)
SetColorOverrideBlue(hindFemur[0])

hindPelvis = cmds.spaceLocator(n='L_hindPelvis_LOC')
cmds.setAttr(hindPelvis[0]+'.translateY', 54)
cmds.setAttr(hindPelvis[0]+'.translateZ', -24)
SetColorOverrideYellow(hindPelvis[0])

hindLocGrp = cmds.group(hindToe,hindAnkle, hindKnee, hindUpperKnee, hindFemur, hindPelvis, n='HindPlacement_GRP')

''' Front leg locator placement '''
frontToe = cmds.spaceLocator(n='L_frontToe_LOC')
cmds.setAttr(frontToe[0]+'.translateX', 12)
cmds.setAttr(frontToe[0]+'.translateZ', 24)
SetColorOverrideBlue(frontToe[0])

frontAnkle = cmds.spaceLocator(n='L_frontAnkle_LOC')
cmds.setAttr(frontAnkle[0]+'.translateX', 12)
cmds.setAttr(frontAnkle[0]+'.translateY', 5)
cmds.setAttr(frontAnkle[0]+'.translateZ', 21)
SetColorOverrideBlue(frontAnkle[0])

frontKnee = cmds.spaceLocator(n='L_frontKnee_LOC')
cmds.setAttr(frontKnee[0]+'.translateX', 12)
cmds.setAttr(frontKnee[0]+'.translateY', 25)
cmds.setAttr(frontKnee[0]+'.translateZ', 24)
SetColorOverrideBlue(frontKnee[0])

frontUpperKnee = cmds.spaceLocator(n='L_frontUpperKnee_LOC')
cmds.setAttr(frontUpperKnee[0]+'.translateX', 12)
cmds.setAttr(frontUpperKnee[0]+'.translateY', 36)
cmds.setAttr(frontUpperKnee[0]+'.translateZ', 18)
SetColorOverrideBlue(frontUpperKnee[0])

frontFemur = cmds.spaceLocator(n='L_frontFemur_LOC')
cmds.setAttr(frontFemur[0]+'.translateX', 12)
cmds.setAttr(frontFemur[0]+'.translateY', 44)
cmds.setAttr(frontFemur[0]+'.translateZ', 25)
SetColorOverrideBlue(frontFemur[0])

frontPelvis = cmds.spaceLocator(n='L_frontPelvis_LOC')
cmds.setAttr(frontPelvis[0]+'.translateY', 54)
cmds.setAttr(frontPelvis[0]+'.translateZ', 20)
SetColorOverrideYellow(frontPelvis[0])

frontLocGrp = cmds.group(frontToe, frontAnkle, frontKnee, frontUpperKnee, frontFemur, frontPelvis, n='FrontPlacement_GRP')

''' Neck locators '''
neckRoot = cmds.spaceLocator(n='NeckRoot_LOC')
cmds.setAttr(neckRoot[0]+'.translateY', 48)
cmds.setAttr(neckRoot[0]+'.translateZ', 30)
SetColorOverrideYellow(neckRoot[0])

neckEnd = cmds.spaceLocator(n='neckEnd_LOC')
cmds.setAttr(neckEnd[0]+'.translateY', 58)
cmds.setAttr(neckEnd[0]+'.translateZ', 50)
SetColorOverrideYellow(neckEnd[0])

neckLocGrp = cmds.group(neckRoot, neckEnd, n='NeckPlacement_GRP')

''' Tail locators '''
tailRoot = cmds.spaceLocator(n='TailRoot_LOC')
cmds.setAttr(tailRoot[0]+'.translateY', 54)
cmds.setAttr(tailRoot[0]+'.translateZ', -32)
SetColorOverrideYellow(tailRoot[0])

tailEnd = cmds.spaceLocator(n='TailEnd_LOC')
cmds.setAttr(tailEnd[0]+'.translateY', 54)
cmds.setAttr(tailEnd[0]+'.translateZ', -62)
SetColorOverrideYellow(tailEnd[0])

tailLocGrp = cmds.group(tailRoot, tailEnd, n='TailPlacement_GRP')

''' Finalize placement locator module '''
mainLocGrp = cmds.group(tailLocGrp, neckLocGrp, frontLocGrp, hindLocGrp, n='MainPlacementLoc_GRP')

''' World Controller. TODO: Replace with Custom Curves'''
worldCtrl = cmds.circle(nr = [0,1,0], n = 'World Controller')
worldCtrl = worldCtrl[0]
subworldCtrl = cmds.circle(nr = [0,1,0],n = 'Sub World Controller')
subworldCtrl = subworldCtrl[0]
cmds.scale(0.7, 0.7, 0.7, subworldCtrl + '.cv[0:16]')
cmds.parent(subworldCtrl, worldCtrl)
SetColorOverrideYellow(worldCtrl)
cmds.select(d = True)

# Hind Joints
''' Create legs module '''
hindPelvisJnt = cmds.joint(n = 'C_HindPelvis_JNT')
SetColorOverrideYellow(hindPelvisJnt)
constraint = cmds.pointConstraint(hindPelvis, hindPelvisJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_hindToeJnt = cmds.joint(n = 'L_HindToe_JNT')
SetColorOverrideYellow(L_hindToeJnt)
constraint = cmds.pointConstraint(hindToe, L_hindToeJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_hindAnkleJnt = cmds.joint(n = 'L_HindAnkle_JNT')
SetColorOverrideYellow(L_hindAnkleJnt)
constraint = cmds.pointConstraint(hindAnkle, L_hindAnkleJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_hindKneeJnt = cmds.joint(n = 'L_HindKnee_JNT')
SetColorOverrideYellow(L_hindKneeJnt)
constraint = cmds.pointConstraint(hindKnee, L_hindKneeJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_hindUpperKneeJnt = cmds.joint(n = 'L_HindUpperKnee_JNT')
SetColorOverrideYellow(L_hindUpperKneeJnt) 
constraint = cmds.pointConstraint(hindUpperKnee, L_hindUpperKneeJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_hindFemurJnt = cmds.joint(n = 'L_HindFemur_JNT') 
SetColorOverrideYellow(L_hindFemurJnt)
constraint = cmds.pointConstraint(hindFemur, L_hindFemurJnt)
cmds.delete(constraint)
cmds.select(d = True)

# Mirror joints to L & R sides
R_hindToeJnt = cmds.duplicate(L_hindToeJnt, n = 'R_HindToe_JNT')
xPos = cmds.getAttr(L_hindToeJnt + '.tx')
R_hindToeJnt = R_hindToeJnt[0]
cmds.setAttr(R_hindToeJnt + '.tx', -xPos)

R_hindAnkleJnt = cmds.duplicate(L_hindAnkleJnt, n = 'R_HindAnkle_JNT')
xPos = cmds.getAttr(L_hindAnkleJnt + '.tx')
R_hindAnkleJnt = R_hindAnkleJnt[0]
cmds.setAttr(R_hindAnkleJnt + '.tx', -xPos)

R_hindKneeJnt = cmds.duplicate(L_hindKneeJnt, n = 'R_HindKnee_JNT')
xPos = cmds.getAttr(L_hindKneeJnt + '.tx')
R_hindKneeJnt = R_hindKneeJnt[0]
cmds.setAttr(R_hindKneeJnt + '.tx', -xPos)

R_hindUpperKneeJnt = cmds.duplicate(L_hindUpperKneeJnt, n = 'R_HindUpperKnee_JNT')
xPos = cmds.getAttr(L_hindUpperKneeJnt + '.tx')
R_hindUpperKneeJnt = R_hindUpperKneeJnt[0]
cmds.setAttr(R_hindUpperKneeJnt + '.tx', -xPos)

R_hindFemurJnt = cmds.duplicate(L_hindFemurJnt, n = 'R_HindFemur_JNT')
xPos = cmds.getAttr(L_hindFemurJnt + '.tx')
R_hindFemurJnt = R_hindFemurJnt[0]
cmds.setAttr(R_hindFemurJnt + '.tx', -xPos)

# End joints for Maya skinning
L_hindToeEndJnt = cmds.joint(n = 'L_HindToeEnd_JNT')
constraint = cmds.pointConstraint(hindToe, L_hindToeEndJnt)
cmds.delete(constraint)
cmds.parent(L_hindToeEndJnt, L_hindToeJnt)
cmds.setAttr(L_hindToeEndJnt + '.tz', 0.04)
cmds.setAttr(L_hindToeEndJnt + '.visibility', 0)
cmds.select(d = True)

R_hindToeEndJnt = cmds.joint(n = 'R_HindToeEnd_JNT')
cmds.parent(R_hindToeEndJnt, R_hindToeJnt, r=True)
cmds.setAttr(R_hindToeEndJnt + '.tz', 0.04)
cmds.setAttr(R_hindToeEndJnt + '.visibility', 0)
cmds.select(d = True)

# Parent hind leg joints, set up both L & R joint chains
cmds.parent(L_hindToeJnt, L_hindAnkleJnt)
cmds.parent(L_hindAnkleJnt, L_hindKneeJnt)
cmds.parent(L_hindKneeJnt, L_hindUpperKneeJnt)
cmds.parent(L_hindUpperKneeJnt, L_hindFemurJnt)
cmds.parent(L_hindFemurJnt, hindPelvisJnt)

cmds.parent(R_hindToeJnt, R_hindAnkleJnt)
cmds.parent(R_hindAnkleJnt, R_hindKneeJnt)
cmds.parent(R_hindKneeJnt, R_hindUpperKneeJnt)
cmds.parent(R_hindUpperKneeJnt, R_hindFemurJnt)
cmds.parent(R_hindFemurJnt, hindPelvisJnt)

# Orient joints
cmds.select(L_hindFemurJnt)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(R_hindFemurJnt)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(d = True)

''' IK Hind Legs '''
L_hindToeJntIK = cmds.joint(n='L_HindToeIK_JNT')
constraint = cmds.pointConstraint(hindToe, L_hindToeJntIK)
cmds.delete(constraint)
cmds.select(d = True)

L_hindAnkleJntIK = cmds.joint(n = 'L_HindAnkleIK_JNT')
constraint = cmds.pointConstraint(hindAnkle, L_hindAnkleJntIK)
cmds.delete(constraint)
cmds.select(d = True)

L_hindKneeJntIK = cmds.joint(n = 'L_HindKneeIK_JNT')
constraint = cmds.pointConstraint(hindKnee, L_hindKneeJntIK)
cmds.delete(constraint)
cmds.select(d = True)

L_hindUpperKneeJntIK = cmds.joint(n = 'L_HindUpperKneeIK_JNT')
constraint = cmds.pointConstraint(hindUpperKnee, L_hindUpperKneeJntIK)
cmds.delete(constraint)
cmds.select(d = True)

L_hindFemurJntIK = cmds.joint(n = 'L_HindFemurIK_JNT') 
constraint = cmds.pointConstraint(hindFemur, L_hindFemurJntIK)
cmds.delete(constraint)
cmds.select(d = True)

# Mirror IK joints to L & R sides
R_hindToeJntIK = cmds.duplicate(L_hindToeJntIK, n = 'R_HindToeIK_JNT')
xPos = cmds.getAttr(L_hindToeJntIK + '.tx')
R_hindToeJntIK = R_hindToeJntIK[0]
cmds.setAttr(R_hindToeJntIK + '.tx', -xPos)

R_hindAnkleJntIK = cmds.duplicate(L_hindAnkleJntIK, n = 'R_HindAnkleIK_JNT')
xPos = cmds.getAttr(L_hindAnkleJntIK + '.tx')
R_hindAnkleJntIK = R_hindAnkleJntIK[0]
cmds.setAttr(R_hindAnkleJntIK + '.tx', -xPos)

R_hindKneeJntIK = cmds.duplicate(L_hindKneeJntIK, n = 'R_HindKneeIK_JNT')
xPos = cmds.getAttr(L_hindKneeJntIK + '.tx')
R_hindKneeJntIK = R_hindKneeJntIK[0]
cmds.setAttr(R_hindKneeJntIK + '.tx', -xPos)

R_hindUpperKneeJntIK = cmds.duplicate(L_hindUpperKneeJntIK, n = 'R_HindUpperKneeIK_JNT')
xPos = cmds.getAttr(L_hindUpperKneeJntIK + '.tx')
R_hindUpperKneeJntIK = R_hindUpperKneeJntIK[0]
cmds.setAttr(R_hindUpperKneeJntIK + '.tx', -xPos)

R_hindFemurJntIK = cmds.duplicate(L_hindFemurJntIK, n = 'R_HindFemurIK_JNT')
xPos = cmds.getAttr(L_hindFemurJntIK + '.tx')
R_hindFemurJntIK = R_hindFemurJntIK[0]
cmds.setAttr(R_hindFemurJntIK + '.tx', -xPos)

# Parent hind leg IK joints, set up both L & R IK joint chains
cmds.parent(L_hindToeJntIK, L_hindAnkleJntIK)
cmds.parent(L_hindAnkleJntIK, L_hindKneeJntIK)
cmds.parent(L_hindKneeJntIK, L_hindUpperKneeJntIK)
cmds.parent(L_hindUpperKneeJntIK, L_hindFemurJntIK)
cmds.parent(L_hindFemurJntIK, hindPelvisJnt)

cmds.parent(R_hindToeJntIK, R_hindAnkleJntIK)
cmds.parent(R_hindAnkleJntIK, R_hindKneeJntIK)
cmds.parent(R_hindKneeJntIK, R_hindUpperKneeJntIK)
cmds.parent(R_hindUpperKneeJntIK, R_hindFemurJntIK)
cmds.parent(R_hindFemurJntIK, hindPelvisJnt)

# Orient IK joints chain correctly
cmds.select(L_hindFemurJntIK)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(R_hindFemurJntIK)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(d = True)

''' FK Hind Legs '''
L_hindToeJntFK = cmds.joint(n='L_HindToeFK_JNT')
constraint = cmds.pointConstraint(hindToe, L_hindToeJntFK)
cmds.delete(constraint)
cmds.select(d = True)

L_hindAnkleJntFK = cmds.joint(n = 'L_HindAnkleFK_JNT')
constraint = cmds.pointConstraint(hindAnkle, L_hindAnkleJntFK)
cmds.delete(constraint)
cmds.select(d = True)

L_hindKneeJntFK = cmds.joint(n = 'L_HindKneeFK_JNT')
constraint = cmds.pointConstraint(hindKnee, L_hindKneeJntFK)
cmds.delete(constraint)
cmds.select(d = True)

L_hindUpperKneeJntFK = cmds.joint(n = 'L_HindUpperKneeFK_JNT')
constraint = cmds.pointConstraint(hindUpperKnee, L_hindUpperKneeJntFK)
cmds.delete(constraint)
cmds.select(d = True)

L_hindFemurJntFK = cmds.joint(n = 'L_HindFemurFK_JNT') 
constraint = cmds.pointConstraint(hindFemur, L_hindFemurJntFK)
cmds.delete(constraint)
cmds.select(d = True)

# Mirror FK joints to L & R sides
R_hindToeJntFK = cmds.duplicate(L_hindToeJntFK, n = 'R_HindToeFK_JNT')
xPos = cmds.getAttr(L_hindToeJntFK + '.tx')
R_hindToeJntFK = R_hindToeJntFK[0]
cmds.setAttr(R_hindToeJntFK + '.tx', -xPos)

R_hindAnkleJntFK = cmds.duplicate(L_hindAnkleJntFK, n = 'R_HindAnkleFK_JNT')
xPos = cmds.getAttr(L_hindAnkleJntFK + '.tx')
R_hindAnkleJntFK = R_hindAnkleJntFK[0]
cmds.setAttr(R_hindAnkleJntFK + '.tx', -xPos)

R_hindKneeJntFK = cmds.duplicate(L_hindKneeJntFK, n = 'R_HindKneeFK_JNT')
xPos = cmds.getAttr(L_hindKneeJntFK + '.tx')
R_hindKneeJntFK = R_hindKneeJntFK[0]
cmds.setAttr(R_hindKneeJntFK + '.tx', -xPos)

R_hindUpperKneeJntFK = cmds.duplicate(L_hindUpperKneeJntFK, n = 'R_HindUpperKneeFK_JNT')
xPos = cmds.getAttr(L_hindUpperKneeJntFK + '.tx')
R_hindUpperKneeJntFK = R_hindUpperKneeJntFK[0]
cmds.setAttr(R_hindUpperKneeJntFK + '.tx', -xPos)

R_hindFemurJntFK = cmds.duplicate(L_hindFemurJntFK, n = 'R_HindFemurFK_JNT')
xPos = cmds.getAttr(L_hindFemurJntFK + '.tx')
R_hindFemurJntFK = R_hindFemurJntFK[0]
cmds.setAttr(R_hindFemurJntFK + '.tx', -xPos)

# Parent hind leg FK joints, set up both L & R FK joint chains
cmds.parent(L_hindToeJntFK, L_hindAnkleJntFK)
cmds.parent(L_hindAnkleJntFK, L_hindKneeJntFK)
cmds.parent(L_hindKneeJntFK, L_hindUpperKneeJntFK)
cmds.parent(L_hindUpperKneeJntFK, L_hindFemurJntFK)
cmds.parent(L_hindFemurJntFK, hindPelvisJnt)

cmds.parent(R_hindToeJntFK, R_hindAnkleJntFK)
cmds.parent(R_hindAnkleJntFK, R_hindKneeJntFK)
cmds.parent(R_hindKneeJntFK, R_hindUpperKneeJntFK)
cmds.parent(R_hindUpperKneeJntFK, R_hindFemurJntFK)
cmds.parent(R_hindFemurJntFK, hindPelvisJnt)

# Orient FK joints chain correctly
cmds.select(L_hindFemurJntFK)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(R_hindFemurJntFK)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(d = True)

# Front Joints
''' Create legs module '''
frontPelvisJnt = cmds.joint(n = 'C_FrontPelvis_JNT')
SetColorOverrideYellow(frontPelvisJnt)
constraint = cmds.pointConstraint(frontPelvis, frontPelvisJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_frontToeJnt = cmds.joint(n = 'L_FrontToe_JNT')
SetColorOverrideYellow(L_frontToeJnt)
constraint = cmds.pointConstraint(frontToe, L_frontToeJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_frontAnkleJnt = cmds.joint(n = 'L_FrontAnkle_JNT')
SetColorOverrideYellow(L_frontAnkleJnt)
constraint = cmds.pointConstraint(frontAnkle, L_frontAnkleJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_frontKneeJnt = cmds.joint(n = 'L_FrontKnee_JNT')
SetColorOverrideYellow(L_frontKneeJnt)
constraint = cmds.pointConstraint(frontKnee, L_frontKneeJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_frontUpperKneeJnt = cmds.joint(n = 'L_FrontUpperKnee_JNT')
SetColorOverrideYellow(L_frontUpperKneeJnt) 
constraint = cmds.pointConstraint(frontUpperKnee, L_frontUpperKneeJnt)
cmds.delete(constraint)
cmds.select(d = True)

L_frontFemurJnt = cmds.joint(n = 'L_FrontFemur_JNT') 
SetColorOverrideYellow(L_frontFemurJnt)
constraint = cmds.pointConstraint(frontFemur, L_frontFemurJnt)
cmds.delete(constraint)
cmds.select(d = True)

# Mirror joints to L & R sides
R_frontToeJnt = cmds.duplicate(L_frontToeJnt, n = 'R_FrontToe_JNT')
xPos = cmds.getAttr(L_frontToeJnt + '.tx')
R_frontToeJnt = R_frontToeJnt[0]
cmds.setAttr(R_frontToeJnt + '.tx', -xPos)

R_frontAnkleJnt = cmds.duplicate(L_frontAnkleJnt, n = 'R_FrontAnkle_JNT')
xPos = cmds.getAttr(L_frontAnkleJnt + '.tx')
R_frontAnkleJnt = R_frontAnkleJnt[0]
cmds.setAttr(R_frontAnkleJnt + '.tx', -xPos)

R_frontKneeJnt = cmds.duplicate(L_frontKneeJnt, n = 'R_FrontKnee_JNT')
xPos = cmds.getAttr(L_frontKneeJnt + '.tx')
R_frontKneeJnt = R_frontKneeJnt[0]
cmds.setAttr(R_frontKneeJnt + '.tx', -xPos)

R_frontUpperKneeJnt = cmds.duplicate(L_frontUpperKneeJnt, n = 'R_FrontUpperKnee_JNT')
xPos = cmds.getAttr(L_frontUpperKneeJnt + '.tx')
R_frontUpperKneeJnt = R_frontUpperKneeJnt[0]
cmds.setAttr(R_frontUpperKneeJnt + '.tx', -xPos)

R_frontFemurJnt = cmds.duplicate(L_frontFemurJnt, n = 'R_FrontFemur_JNT')
xPos = cmds.getAttr(L_frontFemurJnt + '.tx')
R_frontFemurJnt = R_frontFemurJnt[0]
cmds.setAttr(R_frontFemurJnt + '.tx', -xPos)

# End joints for Maya skinning
L_frontToeEndJnt = cmds.joint(n = 'L_FrontToeEnd_JNT')
constraint = cmds.pointConstraint(frontToe, L_frontToeEndJnt)
cmds.delete(constraint)
cmds.parent(L_frontToeEndJnt, L_frontToeJnt)
cmds.setAttr(L_frontToeEndJnt + '.tz', 0.04)
cmds.setAttr(L_frontToeEndJnt + '.visibility', 0)
cmds.select(d = True)

R_frontToeEndJnt = cmds.joint(n = 'R_FrontToeEnd_JNT')
cmds.parent(R_frontToeEndJnt, R_frontToeJnt, r=True)
cmds.setAttr(R_frontToeEndJnt + '.tz', 0.04)
cmds.setAttr(R_frontToeEndJnt + '.visibility', 0)
cmds.select(d = True)

# Parent front leg joints, set up both L & R joint chains
cmds.parent(L_frontToeJnt, L_frontAnkleJnt)
cmds.parent(L_frontAnkleJnt, L_frontKneeJnt)
cmds.parent(L_frontKneeJnt, L_frontUpperKneeJnt)
cmds.parent(L_frontUpperKneeJnt, L_frontFemurJnt)
cmds.parent(L_frontFemurJnt, frontPelvisJnt)

cmds.parent(R_frontToeJnt, R_frontAnkleJnt)
cmds.parent(R_frontAnkleJnt, R_frontKneeJnt)
cmds.parent(R_frontKneeJnt, R_frontUpperKneeJnt)
cmds.parent(R_frontUpperKneeJnt, R_frontFemurJnt)
cmds.parent(R_frontFemurJnt, frontPelvisJnt)
cmds.select(d = True)
cmds.parent(frontPelvisJnt, subworldCtrl)

# Orient joints
cmds.select(L_frontFemurJnt)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(R_frontFemurJnt)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(d = True)

''' IK Front Legs '''
L_frontToeJntIK = cmds.joint(n='L_FrontToeIK_JNT')
constraint = cmds.pointConstraint(frontToe, L_frontToeJntIK)
cmds.delete(constraint)
cmds.select(d = True)

L_frontAnkleJntIK = cmds.joint(n = 'L_FrontAnkleIK_JNT')
constraint = cmds.pointConstraint(frontAnkle, L_frontAnkleJntIK)
cmds.delete(constraint)
cmds.select(d = True)

L_frontKneeJntIK = cmds.joint(n = 'L_FrontKneeIK_JNT')
constraint = cmds.pointConstraint(frontKnee, L_frontKneeJntIK)
cmds.delete(constraint)
cmds.select(d = True)

L_frontUpperKneeJntIK = cmds.joint(n = 'L_FrontUpperKneeIK_JNT')
constraint = cmds.pointConstraint(frontUpperKnee, L_frontUpperKneeJntIK)
cmds.delete(constraint)
cmds.select(d = True)

L_frontFemurJntIK = cmds.joint(n = 'L_FrontFemurIK_JNT') 
constraint = cmds.pointConstraint(frontFemur, L_frontFemurJntIK)
cmds.delete(constraint)
cmds.select(d = True)

# Mirror IK joints to L & R sides
R_frontToeJntIK = cmds.duplicate(L_frontToeJntIK, n = 'R_FrontToeIK_JNT')
xPos = cmds.getAttr(L_frontToeJntIK + '.tx')
R_frontToeJntIK = R_frontToeJntIK[0]
cmds.setAttr(R_frontToeJntIK + '.tx', -xPos)

R_frontAnkleJntIK = cmds.duplicate(L_frontAnkleJntIK, n = 'R_FrontAnkleIK_JNT')
xPos = cmds.getAttr(L_frontAnkleJntIK + '.tx')
R_frontAnkleJntIK = R_frontAnkleJntIK[0]
cmds.setAttr(R_frontAnkleJntIK + '.tx', -xPos)

R_frontKneeJntIK = cmds.duplicate(L_frontKneeJntIK, n = 'R_FrontKneeIK_JNT')
xPos = cmds.getAttr(L_frontKneeJntIK + '.tx')
R_frontKneeJntIK = R_frontKneeJntIK[0]
cmds.setAttr(R_frontKneeJntIK + '.tx', -xPos)

R_frontUpperKneeJntIK = cmds.duplicate(L_frontUpperKneeJntIK, n = 'R_FrontUpperKneeIK_JNT')
xPos = cmds.getAttr(L_frontUpperKneeJntIK + '.tx')
R_frontUpperKneeJntIK = R_frontUpperKneeJntIK[0]
cmds.setAttr(R_frontUpperKneeJntIK + '.tx', -xPos)

R_frontFemurJntIK = cmds.duplicate(L_frontFemurJntIK, n = 'R_FrontFemurIK_JNT')
xPos = cmds.getAttr(L_frontFemurJntIK + '.tx')
R_frontFemurJntIK = R_frontFemurJntIK[0]
cmds.setAttr(R_frontFemurJntIK + '.tx', -xPos)

# Parent front leg IK joints, set up both L & R IK joint chains
cmds.parent(L_frontToeJntIK, L_frontAnkleJntIK)
cmds.parent(L_frontAnkleJntIK, L_frontKneeJntIK)
cmds.parent(L_frontKneeJntIK, L_frontUpperKneeJntIK)
cmds.parent(L_frontUpperKneeJntIK, L_frontFemurJntIK)
cmds.parent(L_frontFemurJntIK, frontPelvisJnt)

cmds.parent(R_frontToeJntIK, R_frontAnkleJntIK)
cmds.parent(R_frontAnkleJntIK, R_frontKneeJntIK)
cmds.parent(R_frontKneeJntIK, R_frontUpperKneeJntIK)
cmds.parent(R_frontUpperKneeJntIK, R_frontFemurJntIK)
cmds.parent(R_frontFemurJntIK, frontPelvisJnt)

# Orient IK joints chain correctly
cmds.select(L_frontFemurJntIK)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(R_frontFemurJntIK)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(d = True)

''' FK Front Legs '''
L_frontToeJntFK = cmds.joint(n='L_FrontToeFK_JNT')
constraint = cmds.pointConstraint(frontToe, L_frontToeJntFK)
cmds.delete(constraint)
cmds.select(d = True)

L_frontAnkleJntFK = cmds.joint(n = 'L_FrontAnkleFK_JNT')
constraint = cmds.pointConstraint(frontAnkle, L_frontAnkleJntFK)
cmds.delete(constraint)
cmds.select(d = True)

L_frontKneeJntFK = cmds.joint(n = 'L_FrontKneeFK_JNT')
constraint = cmds.pointConstraint(frontKnee, L_frontKneeJntFK)
cmds.delete(constraint)
cmds.select(d = True)

L_frontUpperKneeJntFK = cmds.joint(n = 'L_FrontUpperKneeFK_JNT')
constraint = cmds.pointConstraint(frontUpperKnee, L_frontUpperKneeJntFK)
cmds.delete(constraint)
cmds.select(d = True)

L_frontFemurJntFK = cmds.joint(n = 'L_FrontFemurFK_JNT') 
constraint = cmds.pointConstraint(frontFemur, L_frontFemurJntFK)
cmds.delete(constraint)
cmds.select(d = True)

# Mirror FK joints to L & R sides
R_frontToeJntFK = cmds.duplicate(L_frontToeJntFK, n = 'R_FrontToeFK_JNT')
xPos = cmds.getAttr(L_frontToeJntFK + '.tx')
R_frontToeJntFK = R_frontToeJntFK[0]
cmds.setAttr(R_frontToeJntFK + '.tx', -xPos)

R_frontAnkleJntFK = cmds.duplicate(L_frontAnkleJntFK, n = 'R_FrontAnkleFK_JNT')
xPos = cmds.getAttr(L_frontAnkleJntFK + '.tx')
R_frontAnkleJntFK = R_frontAnkleJntFK[0]
cmds.setAttr(R_frontAnkleJntFK + '.tx', -xPos)

R_frontKneeJntFK = cmds.duplicate(L_frontKneeJntFK, n = 'R_FrontKneeFK_JNT')
xPos = cmds.getAttr(L_frontKneeJntFK + '.tx')
R_frontKneeJntFK = R_frontKneeJntFK[0]
cmds.setAttr(R_frontKneeJntFK + '.tx', -xPos)

R_frontUpperKneeJntFK = cmds.duplicate(L_frontUpperKneeJntFK, n = 'R_FrontUpperKneeFK_JNT')
xPos = cmds.getAttr(L_frontUpperKneeJntFK + '.tx')
R_frontUpperKneeJntFK = R_frontUpperKneeJntFK[0]
cmds.setAttr(R_frontUpperKneeJntFK + '.tx', -xPos)

R_frontFemurJntFK = cmds.duplicate(L_frontFemurJntFK, n = 'R_FrontFemurFK_JNT')
xPos = cmds.getAttr(L_frontFemurJntFK + '.tx')
R_frontFemurJntFK = R_frontFemurJntFK[0]
cmds.setAttr(R_frontFemurJntFK + '.tx', -xPos)

# Parent front leg FK joints, set up both L & R FK joint chains
cmds.parent(L_frontToeJntFK, L_frontAnkleJntFK)
cmds.parent(L_frontAnkleJntFK, L_frontKneeJntFK)
cmds.parent(L_frontKneeJntFK, L_frontUpperKneeJntFK)
cmds.parent(L_frontUpperKneeJntFK, L_frontFemurJntFK)
cmds.parent(L_frontFemurJntFK, frontPelvisJnt)

cmds.parent(R_frontToeJntFK, R_frontAnkleJntFK)
cmds.parent(R_frontAnkleJntFK, R_frontKneeJntFK)
cmds.parent(R_frontKneeJntFK, R_frontUpperKneeJntFK)
cmds.parent(R_frontUpperKneeJntFK, R_frontFemurJntFK)
cmds.parent(R_frontFemurJntFK, frontPelvisJnt)

# Orient FK joints chain correctly
cmds.select(L_frontFemurJntFK)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(R_frontFemurJntFK)
cmds.joint(e = True, zso = True, oj = 'xyz', secondaryAxisOrient = 'yup', ch = True)
cmds.select(d = True)

# IK controllers
''' IK controllers: Left hind leg''' 
L_IK = cmds.ikHandle(sol = 'ikRPsolver', n = 'L_HindLeg_IK', sj = L_hindFemurJntIK, ee = L_hindAnkleJntIK)
L_hindIKCtrl = cmds.curve(d=1, p=[(1,0,-1),(-1,0,-1),(-1,0,1),(1,0,1),(1,0,-1)], k=[0,1,2,3,4], n='L_FootIK_CTRL')

# Get distance to get controller with decent scale from front hind leg toe to back hind leg toe
dist = cmds.createNode('distanceDimShape', n='temp_to_delete') 
legStart = cmds.xform(L_hindToeJntIK, q = True, ws = True, rp = True) # q = query for specific value, ws = world space, rq = rotation pivot point
legEnd = cmds.xform(L_frontToeJntIK, q = True, ws = True, rp = True) # q = query for specific value, ws = world space, rq = rotation pivot point
cmds.setAttr(dist + '.endPoint', *(legStart)) # Star sign to unpack the variable = different way to access values in a list
cmds.setAttr(dist + '.startPoint', *(legEnd))
distance = cmds.getAttr(dist + '.distance')
cmds.delete(cmds.listRelatives(dist, p = True))
distance = distance / 8
cmds.setAttr(L_hindIKCtrl + '.sx', distance)
cmds.setAttr(L_hindIKCtrl + '.sy', distance)
cmds.setAttr(L_hindIKCtrl + '.sz', distance)
cmds.makeIdentity(L_hindIKCtrl, apply = True, t = 1, r = 1, s = 1, n = 0)
lockScale(L_hindIKCtrl)
L_hindIKCtrlGrp = cmds.group(L_hindIKCtrl, n = 'L_FootIKCtrl_GRP')
SetColorOverrideBlue(L_hindIKCtrlGrp)

constraint = cmds.pointConstraint(L_hindToeJnt, L_hindIKCtrlGrp)
cmds.delete(constraint)
cmds.parent(L_IK[0], L_hindIKCtrl)
cmds.setAttr(L_IK[0] + '.visibility', 0)

# Aim constraint makes the upper hind femur joints follow by some but lets the leg fold up like it should
cmds.aimConstraint(L_hindIKCtrl, L_hindFemurJntIK, n = 'L_Femur_Aim_Towards_Foot_CTRL', mo = True, wu = [0,0,0])
L_IK_Toe = cmds.ikHandle(sol = 'ikRPsolver', n = 'L_HindToe_IK', sj = L_hindAnkleJntIK, ee = L_hindToeJntIK)
cmds.parent(L_IK_Toe[0], L_hindIKCtrl)
cmds.setAttr(L_IK_Toe[0] + '.visibility', 0)

''' IK Controller: Right hind leg '''
R_IK = cmds.ikHandle(sol = 'ikRPsolver', n = 'R_HindLeg_IK', sj = R_hindFemurJntIK, ee = R_hindAnkleJntIK)
R_hindIKCtrl = cmds.curve(d=1, p=[(1,0,-1),(-1,0,-1),(-1,0,1),(1,0,1),(1,0,-1)], k=[0,1,2,3,4], n='R_FootIK_CTRL')

cmds.setAttr(R_hindIKCtrl + '.sx', distance)
cmds.setAttr(R_hindIKCtrl + '.sy', distance)
cmds.setAttr(R_hindIKCtrl + '.sz', distance)
cmds.makeIdentity(R_hindIKCtrl, apply = True, t = 1, r = 1, s = 1, n = 0)
lockScale(R_hindIKCtrl)
R_hindIKCtrlGrp = cmds.group(R_hindIKCtrl, n = 'R_FootIKCtrl_GRP')
SetColorOverrideRed(R_hindIKCtrlGrp)

constraint = cmds.pointConstraint(R_hindToeJnt, R_hindIKCtrlGrp)
cmds.delete(constraint)
cmds.parent(R_IK[0], R_hindIKCtrl)
cmds.setAttr(R_IK[0] + '.visibility', 0)

# Aim constraint makes the upper hind femur joints follow by some but lets the leg fold up like it should
cmds.aimConstraint(R_hindIKCtrl, R_hindFemurJntIK, n = 'R_Femur_Aim_Towards_Foot_CTRL', mo = True, wu = [0,0,0])
R_IK_Toe = cmds.ikHandle(sol = 'ikRPsolver', n = 'R_HindToe_IK', sj = R_hindAnkleJntIK, ee = R_hindToeJntIK)
cmds.parent(R_IK_Toe[0], R_hindIKCtrl)
cmds.setAttr(R_IK_Toe[0] + '.visibility', 0)

''' IK Controller: Left front leg '''
L_Front_IK = cmds.ikHandle(sol = 'ikRPsolver', n = 'L_FrontLeg_IK', sj = L_frontUpperKneeJntIK, ee = L_frontAnkleJntIK)
L_frontIKCtrl = cmds.curve(d=1, p=[(1,0,-1),(-1,0,-1),(-1,0,1),(1,0,1),(1,0,-1)], k=[0,1,2,3,4], n='L_Front_Foot_IK_CTRL')
cmds.setAttr(L_frontIKCtrl + '.sx', distance)
cmds.setAttr(L_frontIKCtrl + '.sy', distance)
cmds.setAttr(L_frontIKCtrl + '.sz', distance)
cmds.makeIdentity(L_frontIKCtrl, apply = True, t = 1, r = 1, s = 1, n = 0)
lockScale(L_frontIKCtrl)
L_frontIKCtrlGrp = cmds.group(L_frontIKCtrl, n = 'L_FrontFoot_IK_Ctrl_GRP')
SetColorOverrideBlue(L_frontIKCtrlGrp)
constraint = cmds.pointConstraint(L_frontToeJnt, L_frontIKCtrlGrp)
cmds.delete(constraint)
cmds.parent(L_Front_IK[0], L_frontIKCtrl)
cmds.setAttr(L_Front_IK[0] + '.visibility', 0)

''' IK Controller: Right front leg '''
R_Front_IK = cmds.ikHandle(sol = 'ikRPsolver', n = 'R_FrontLeg_IK', sj = R_frontUpperKneeJntIK, ee = R_frontAnkleJntIK)
R_frontIKCtrl = cmds.curve(d=1, p=[(1,0,-1),(-1,0,-1),(-1,0,1),(1,0,1),(1,0,-1)], k=[0,1,2,3,4], n='R_Front_Foot_IK_CTRL')
cmds.setAttr(R_frontIKCtrl + '.sx', distance)
cmds.setAttr(R_frontIKCtrl + '.sy', distance)
cmds.setAttr(R_frontIKCtrl + '.sz', distance)
cmds.makeIdentity(R_frontIKCtrl, apply = True, t = 1, r = 1, s = 1, n = 0)
lockScale(R_frontIKCtrl)
R_frontIKCtrlGrp = cmds.group(R_frontIKCtrl, n = 'R_FrontFoot_IK_Ctrl_GRP')
SetColorOverrideRed(R_frontIKCtrlGrp)
constraint = cmds.pointConstraint(R_frontToeJnt, R_frontIKCtrlGrp)
cmds.delete(constraint)
cmds.parent(R_Front_IK[0], R_frontIKCtrl)
cmds.setAttr(R_Front_IK[0] + '.visibility', 0)

''' Left IK Front Leg Rotation Controller '''
L_frontLeg_Rotation=cmds.circle(nr = (1, 0, 0), c = (0, 0, 0), n = 'L_FrontLeg_Rotate_CTRL')[0]
L_frontLeg_Rotation_GRP = cmds.group(L_frontLeg_Rotation, n = 'L_FrontLeg_Rotate_CTRL_GRP')
cmds.scale(distance,distance,distance)
cmds.makeIdentity(L_frontLeg_Rotation_GRP,apply=True, t=1, r=1, s=1, n=0)
constraint=cmds.pointConstraint(L_frontFemurJntFK, L_frontLeg_Rotation_GRP)
cmds.delete(constraint)
SetColorOverrideBlue(L_frontLeg_Rotation)

''' Right IK Front Leg Rotation Controller '''
R_frontLeg_Rotation=cmds.circle(nr = (1, 0, 0), c = (0, 0, 0), n = 'R_FrontLeg_Rotate_CTRL')[0]
R_frontLeg_Rotation_GRP = cmds.group(R_frontLeg_Rotation, n = 'R_FrontLeg_Rotate_CTRL_GRP')
cmds.scale(distance, distance, distance)
cmds.makeIdentity(R_frontLeg_Rotation_GRP, apply=True, t=1, r=1, s=1, n=0) 
constraint=cmds.pointConstraint(R_frontFemurJntFK, R_frontLeg_Rotation_GRP)
cmds.delete(constraint)
SetColorOverrideRed(R_frontLeg_Rotation)